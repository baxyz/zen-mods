/* ==========================================================================
   Tab Context Menu Organizer for Zen Browser
   ========================================================================== */

/* Only apply styles when the mod is enabled */
@media (-moz-bool-pref: "mod.tab_context_organizer.enabled") {

  /* Hide original tab movement items to reorganize them */
  #context_moveToStart,
  #context_moveToEnd,
  #context_moveTabOptions,
  #context_moveToNewWindow {
    display: none !important;
  }

  /* Conditionally hide container options based on preference */
  @media not (-moz-bool-pref: "mod.tab_context_organizer.include_containers") {
    #context_reopenInContainer {
      display: none !important;
    }
  }

  /* Conditionally hide device options based on preference */
  @media not (-moz-bool-pref: "mod.tab_context_organizer.include_devices") {
    #context_sendTabToDevice {
      display: none !important;
    }
  }

  /* Create a new submenu for tab movement options */
  #tabContextMenu {
    --zen-tab-move-submenu-icon: url("data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2'%3E%3Cpath d='M3 12h18m-9-9l9 9-9 9'/%3E%3C/svg%3E");
  }

  /* Style for the main submenu item */
  .zen-tab-move-submenu {
    list-style-image: var(--zen-tab-move-submenu-icon) !important;
  }

  /* Use custom label if provided */
  .zen-tab-move-submenu[label] {
    -moz-binding: url("data:text/xml,%3C?xml version='1.0'?%3E%3Cbindings xmlns='http://www.mozilla.org/xbl'%3E%3Cbinding id='custom-label'%3E%3Ccontent%3E%3Cxul:label value='var(--mod-tab_context_organizer-submenu_label)' /%3E%3C/content%3E%3C/binding%3E%3C/bindings%3E") !important;
  }

  /* Ensure submenu items are visible */
  .zen-tab-move-submenu>menupopup>menuitem,
  .zen-tab-move-submenu>menupopup>menuseparator {
    display: block !important;
  }

  /* Style submenu items with appropriate icons */
  .zen-tab-move-item {
    padding-inline-start: 8px !important;
  }

  /* Icons for different move actions */
  .zen-tab-move-start {
    list-style-image: url("data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2'%3E%3Cpath d='M3 6h18M3 12h18M3 18h18'/%3E%3Cline x1='3' y1='6' x2='3' y2='18'/%3E%3C/svg%3E") !important;
  }

  .zen-tab-move-end {
    list-style-image: url("data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2'%3E%3Cpath d='M3 6h18M3 12h18M3 18h18'/%3E%3Cline x1='21' y1='6' x2='21' y2='18'/%3E%3C/svg%3E") !important;
  }

  .zen-tab-move-window {
    list-style-image: url("data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2'%3E%3Crect x='3' y='3' width='18' height='18' rx='2' ry='2'/%3E%3Cline x1='9' y1='9' x2='15' y2='15'/%3E%3Cline x1='15' y1='9' x2='9' y2='15'/%3E%3C/svg%3E") !important;
  }

  .zen-tab-move-workspace {
    list-style-image: url("data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2'%3E%3Crect x='2' y='2' width='20' height='20' rx='2' ry='2'/%3E%3Cpath d='M8 2v20M16 2v20M2 8h20M2 16h20'/%3E%3C/svg%3E") !important;
  }

  .zen-tab-move-device {
    list-style-image: url("data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2'%3E%3Crect x='2' y='3' width='20' height='14' rx='2' ry='2'/%3E%3Cline x1='8' y1='21' x2='16' y2='21'/%3E%3Cline x1='12' y1='17' x2='12' y2='21'/%3E%3C/svg%3E") !important;
  }

  .zen-tab-move-container {
    list-style-image: url("data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2'%3E%3Cpath d='M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z'/%3E%3Cpolyline points='3.27,6.96 12,12.01 20.73,6.96'/%3E%3Cline x1='12' y1='22.08' x2='12' y2='12'/%3E%3C/svg%3E") !important;
  }

  /* Responsive adjustments */
  @media (max-width: 600px) {
    .zen-tab-move-submenu>menupopup {
      max-width: 250px !important;
    }
  }

  /* Dark theme support */
  @media (prefers-color-scheme: dark) {
    #tabContextMenu {
      --zen-tab-move-submenu-icon: url("data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23ffffff' stroke-width='2'%3E%3Cpath d='M3 12h18m-9-9l9 9-9 9'/%3E%3C/svg%3E");
    }
  }
}